# ArgoCD configuration

## Minimal configuration
If ArgoCD is installed using the official helm chart the following configuration should be sufficient to make it work:
```yaml
server:
  config:
    helm.valuesFileSchemes: https, secrets+age-import

repoServer:
  image:
    repository: ghcr.io/shini4i/argocd
    tag: v2.3.0
    imagePullPolicy: IfNotPresent

  volumes:
    - name: credentials
      projected:
        sources:
          - secret:
              name: helm-secrets-private-keys

  volumeMounts:
    - mountPath: "/opt/secrets/"
      name: credentials
      readOnly: true

  env:
    - name: HELM_PLUGINS
      value: "/home/argocd/.local/share/helm/plugins/"
```
Secret helm-secrets-private-keys should contain key.txt generated by [age](https://github.com/FiloSottile/age).
```bash
age-keygen -o key.txt
kubectl create secret generic helm-secrets-private-keys --from-file=key.txt
```

